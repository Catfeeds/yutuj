<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>forgot next</title>
    <link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://cdn.bootcss.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.bootcss.com/vue/2.5.9/vue.js"></script>
    <script src="https://cdn.bootcss.com/axios/0.17.1/axios.min.js"></script>
    <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.bootcss.com/bootstrap/4.0.0-beta.2/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="../css/css.css">
</head>
<body>
<div class="bg-forgot position-fixed" id="app">
    <div class="panel-login position-fixed">
        <p class="text-center"><img src="../img/logo_login.png" alt="logo_login"></p>
        <form class="position-relative" v-on:submit.prevent="onSubmit">
            <transition name="fade">
                <div class="position-absolute text-danger error" v-if="error">
                    <i class="fa fa-info-circle"></i> {{ errMsg }}
                </div>
            </transition>
            <div class="form-group">
                <input type="password" class="form-control" placeholder="请输入新密码" v-model="password">
            </div>
            <div class="form-group">
                <input type="password" class="form-control" placeholder="请输入重复密码" v-model="password_confirmed">
            </div>
            <button type="submit" class="btn btn-warning btn-block text-white">完成</button>
        </form>
    </div>
</div>
<script>
    const app = new Vue({
        el: '#app',
        data: {
            error: false,
            errMsg: '',
            password: '',
            password_confirmed: ''
        },
        methods: {
            onSubmit() {
                if (this.checkPwd()) {
                    this.resetError()
                    alert('找回密码操作')
                }
            },
            resetError() {
                this.error = false
                this.errMsg = ''
            },
            checkPwd() {
                if (this.password.length === 0) {
                    this.error = true
                    this.errMsg = '请输入新密码'
                    return false
                }
                if (this.password.length < 6) {
                    this.error = true
                    this.errMsg = '新密码长度至少6位'
                    return false
                }
                if (this.password !== this.password_confirmed) {
                    this.error = true
                    this.errMsg = '2次输入密码不一致'
                    return false
                }
                return true
            }
        }
    })
</script>
</body>
</html>